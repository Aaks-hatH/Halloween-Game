<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>The Locked Dungeon</title>
<link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: linear-gradient(180deg,#0a0a0a 0%,#1a0a0a 60%,#0a0a0a 100%);
    color: #ff8c00;
    font-family: "Creepster", cursive, sans-serif;
    text-align: center;
    padding: 30px;
    min-height: 100vh;
  }
  h1 { 
    font-size: clamp(2rem,5vw,3rem); 
    margin-bottom: 8px; 
    text-shadow:0 0 20px #ff4500;
    animation: flicker 3s infinite;
  }
  @keyframes flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
    75% { opacity: 0.9; }
  }
  .subtitle { margin-bottom: 14px; opacity: .9; font-size: 1.1rem; }
  .riddle-container { max-width: 900px; margin: 18px auto; display: grid; grid-template-columns: 1fr; gap: 18px; }
  .riddle-card {
    background: linear-gradient(135deg, rgba(20,20,20,.95), rgba(30,15,10,.95));
    border: 1px solid rgba(255,140,0,.2);
    padding: 18px;
    border-radius: 14px;
    transition: all 0.3s;
  }
  .riddle-card.solved {
    border-color: rgba(0,255,0,0.4);
    box-shadow: 0 0 20px rgba(0,255,0,0.2);
  }
  .riddle-text {
    background: rgba(10,10,10,.9);
    border: 1px solid rgba(255,140,0,.15);
    border-radius: 8px;
    padding: 20px;
    margin: 12px 0;
    color: #ffb366;
    font-family: sans-serif;
    font-size: 1.1rem;
    line-height: 1.6;
    white-space: pre-wrap;
    text-align: left;
  }
  .riddle-controls { display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap; margin-top: 15px; }
  input[type=text] {
    padding:10px 14px; 
    border-radius:10px; 
    border:2px solid rgba(255,140,0,.3);
    background: rgba(10,10,10,.85); 
    color: #ff8c00; 
    width: 220px; 
    font-family: sans-serif; 
    text-align:center;
    font-size: 1rem;
  }
  button { 
    padding:10px 18px; 
    border-radius:10px; 
    border:none; 
    font-weight:bold; 
    cursor:pointer; 
    background: linear-gradient(135deg,#ff8c00,#ff6600); 
    color:#0a0a0a;
    transition: transform 0.1s;
    font-size: 1rem;
  }
  button:hover { transform: scale(1.05); }
  button:active { transform: scale(0.98); }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  #progressFill { 
    height:30px; 
    width:0%; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    border-radius:8px; 
    background: linear-gradient(90deg,#ff8c00,#ff6600); 
    color:#0a0a0a; 
    font-weight:bold;
    transition: width 0.3s;
    font-family: sans-serif;
  }
  .progress-bar { 
    width:100%; 
    background: rgba(10,10,10,.8); 
    border-radius:8px; 
    border:1px solid rgba(255,140,0,.2); 
    padding:3px; 
    margin-bottom:12px; 
  }
  #hintBox { 
    display:none; 
    max-width:760px; 
    margin:12px auto; 
    padding:12px; 
    background: rgba(10,10,10,.95); 
    border-radius:8px; 
    border:1px solid rgba(255,140,0,.2); 
  }
  #result { margin-top:10px; min-height:26px; font-family: sans-serif; }
  .feedback {
    min-height: 22px;
    margin-top: 10px;
    font-family: sans-serif;
    font-size: 1rem;
  }
  .credits {
    margin-top: 60px;
    padding: 30px 20px;
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
    background: linear-gradient(135deg, rgba(20,20,20,.8), rgba(30,15,10,.8));
    border: 1px solid rgba(255,140,0,.15);
    border-radius: 14px;
  }
  .credits h3 {
    color: #ff8c00;
    font-size: 1.8rem;
    margin-bottom: 20px;
    text-shadow: 0 0 10px #ff4500;
  }
  .credits-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    font-family: sans-serif;
  }
  .credit-item {
    color: #ffb366;
    font-size: 1.1rem;
    line-height: 1.5;
  }
  .credit-name {
    color: #ff8c00;
    font-weight: bold;
    font-size: 1.2rem;
  }
  .credit-role {
    color: #cc7700;
    font-style: italic;
  }
  
  /* Victory Screen Styles */
  .victory-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(0, 100, 0, 0.95), rgba(0, 50, 0, 0.95));
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.5s ease;
  }
  
  .victory-content {
    background: linear-gradient(135deg, rgba(20, 80, 20, 0.95), rgba(10, 40, 10, 0.95));
    border: 4px solid #00ff00;
    border-radius: 20px;
    padding: 60px 40px;
    max-width: 700px;
    text-align: center;
    box-shadow: 0 0 100px rgba(0, 255, 0, 0.6);
    animation: victoryPulse 2s ease-in-out infinite;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes victoryPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 100px rgba(0, 255, 0, 0.6); }
    50% { transform: scale(1.02); box-shadow: 0 0 150px rgba(0, 255, 0, 0.8); }
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }
  
  @keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
  }
  
  .victory-title {
    color: #00ff00;
    font-size: 4rem;
    margin-bottom: 30px;
    font-family: 'Creepster', cursive;
    text-shadow: 0 0 30px #00ff00, 0 0 60px #00ff00;
    animation: float 3s ease-in-out infinite;
  }
  
  .victory-message {
    color: #aaffaa;
    font-size: 1.5rem;
    margin-bottom: 30px;
    line-height: 2;
    font-family: sans-serif;
  }
  
  .victory-code {
    background: rgba(0, 0, 0, 0.5);
    border: 2px solid #00ff00;
    border-radius: 15px;
    padding: 20px;
    margin: 30px 0;
    font-size: 2.5rem;
    color: #00ff00;
    font-family: 'Creepster', cursive;
    letter-spacing: 10px;
    text-shadow: 0 0 20px #00ff00;
  }
  
  .victory-emoji {
    font-size: 5rem;
    margin: 20px 0;
    animation: float 2s ease-in-out infinite;
  }
  
  .sparkles {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }
  
  .sparkle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: #00ff00;
    border-radius: 50%;
    box-shadow: 0 0 20px #00ff00;
    animation: sparkle 2s ease-in-out infinite;
  }
  
  @media (max-width:640px) {
    input[type=text] { width: 150px; }
    .victory-title { font-size: 2.5rem; }
    .victory-message { font-size: 1.2rem; }
    .victory-code { font-size: 1.8rem; letter-spacing: 5px; }
  }
</style>
</head>
<body>

<h1>💀 The Locked Dungeon</h1>
<p class="subtitle">Solve the five riddles. The first letter of each answer spells the final code.</p>

<div class="progress-card riddle-card">
  <div style="max-width:760px;margin:0 auto;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
      <strong>Progress</strong>
      <small id="progressText">0 / 5 solved</small>
    </div>
    <div class="progress-bar"><div id="progressFill" style="width:0%">0/5</div></div>
  </div>
</div>

<div class="riddle-container" id="riddleContainer"></div>

<div class="riddle-card" style="max-width:760px;margin:16px auto;">
  <h3 style="margin-bottom:12px;">Enter the Final Code</h3>
  <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
    <input id="codeInput" type="text" maxlength="5" placeholder="5-letter code (A..Z)">
    <button id="unlockBtn">Unlock</button>
  </div>
  <p id="result"></p>
</div>

<div style="margin:12px auto 40px;max-width:760px;">
  <button id="hintBtn">💡 Need a Hint?</button>
  <div id="hintBox"></div>
</div>

<div class="credits">
  <h3>🎃 Credits 🎃</h3>
  <div class="credits-list">
    <div class="credit-item">
      <span class="credit-name">Aakshat Hariharan</span><br>
      <span class="credit-role">Developer & Creator</span>
    </div>
    <div class="credit-item">
      <span class="credit-name">Kory Alerte</span><br>
      <span class="credit-role">Co-Creator & Author</span>
    </div>
  </div>
</div>

<script>
(function() {
  'use strict';
  
  // Riddles data
  const riddles = [
    {
      id: 1,
      title: "Riddle 1",
      text: "I have no body, but I can appear,\nI whisper in your ear, but vanish near.\n\nYou'll feel my chill though I am air,\nWhat am I, haunting everywhere?",
      answer: "G"
    },
    {
      id: 2,
      title: "Riddle 2",
      text: "I am full of ghosts, cobwebs, and fright,\nPeople visit me on Halloween night.\nDark and spooky is my style,\nWhat am I?",
      answer: "H"
    },
    {
      id: 3,
      title: "Riddle 3",
      text: "Round and hollow, dark my core,\nI open wide but have no door.\nWithout me, faces cannot see\nWhat letter am I meant to be?\n(Hint: The letter is a Shape)",
      answer: "O"
    },
    {
      id: 4,
      title: "Riddle 4",
      text: "Neither living nor quite dead,\nI rise again when moonlight's shed.\nI shamble slow, with vacant hue\nGuess my name.",
      answer: "U"
    },
    {
      id: 5,
      title: "Riddle 5",
      text: "I live inside a haunted flame,\nWithout me, dark would rule the game.\nI flicker soft, I guard your soul\nWhat am I, with shining role?",
      answer: "L"
    }
  ];
  
  const hints = {
    "1": "Think of a chilling presence that has no physical body.",
    "2": "A place people visit on Halloween where scary things are displayed, two words.",
    "3": "A round letter that is also a shape.",
    "4": "A word for the category a walking dead creature is classified as.",
    "5": "A source of flickering illumination that keeps the dark away."
  };
  
  const solved = {1:false, 2:false, 3:false, 4:false, 5:false};

  function stripZeroWidth(str) {
    return str.replace(/[\u200B\u200C\u200D\uFEFF\u2060]/g, '');
  }

  function createRiddleCard(r) {
    const card = document.createElement('div');
    card.className = 'riddle-card';
    card.id = 'card-' + r.id;

    const h = document.createElement('h3');
    h.textContent = r.title;
    h.style.marginBottom = '12px';
    card.appendChild(h);

    const riddleText = document.createElement('div');
    riddleText.className = 'riddle-text';
    riddleText.textContent = r.text;
    card.appendChild(riddleText);

    const controls = document.createElement('div');
    controls.className = 'riddle-controls';
    
    const input = document.createElement('input');
    input.type = 'text';
    input.id = 'answer' + r.id;
    input.placeholder = 'Your answer';
    input.autocomplete = 'off';
    input.spellcheck = false;

    const submit = document.createElement('button');
    submit.textContent = 'Submit';
    submit.onclick = () => checkRiddle(r.id);

    const feedback = document.createElement('div');
    feedback.className = 'feedback';
    feedback.id = 'feedback' + r.id;

    controls.appendChild(input);
    controls.appendChild(submit);
    card.appendChild(controls);
    card.appendChild(feedback);

    return card;
  }

  function renderRiddles() {
    const container = document.getElementById('riddleContainer');
    riddles.forEach(r => {
      container.appendChild(createRiddleCard(r));
    });
  }

  function updateProgressDisplay() {
    const solvedCount = Object.values(solved).filter(Boolean).length;
    const pct = (solvedCount/5) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressFill').textContent = `${solvedCount}/5`;
    document.getElementById('progressText').textContent = `${solvedCount} / 5 solved`;
  }

  function checkRiddle(id) {
    const inp = document.getElementById('answer' + id);
    const fb = document.getElementById('feedback' + id);
    if (!inp) return;
    
    let val = (inp.value || '').trim();
    val = stripZeroWidth(val);
    
    if (!val) {
      fb.style.color = '#ff4444';
      fb.textContent = 'Please type an answer.';
      return;
    }
    
    const first = val[0].toUpperCase();
    const expected = riddles.find(r => r.id === id).answer.toUpperCase();
    
    if (first === expected) {
      solved[id] = true;
      fb.style.color = '#00cc66';
      fb.textContent = '✓ Correct — nice work.';
      inp.disabled = true;
      const card = document.getElementById('card-' + id);
      if (card) card.classList.add('solved');
      updateProgressDisplay();
    } else {
      fb.style.color = '#ff4444';
      fb.textContent = '✗ Incorrect — try again.';
      setTimeout(() => { fb.textContent = ''; }, 3000);
    }
  }

  function getFinalCode() {
    return riddles.map(r => r.answer[0].toUpperCase()).join('');
  }

  function showVictoryScreen(code) {
    const overlay = document.createElement('div');
    overlay.className = 'victory-overlay';
    
    const sparkles = document.createElement('div');
    sparkles.className = 'sparkles';
    
    // Create sparkle effects
    for (let i = 0; i < 30; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.style.left = Math.random() * 100 + '%';
      sparkle.style.top = Math.random() * 100 + '%';
      sparkle.style.animationDelay = Math.random() * 2 + 's';
      sparkles.appendChild(sparkle);
    }
    
    const content = document.createElement('div');
    content.className = 'victory-content';
    
    content.innerHTML = `
      <div class="victory-emoji">🎉</div>
      <h1 class="victory-title">CONGRATULATIONS!</h1>
      <p class="victory-message">
        You have escaped the dungeon!<br>
        The spirits bow to your wisdom.
      </p>
      <div class="victory-code">
        ${code}
      </div>
      <p class="victory-message" style="font-size: 1.2rem; margin-top: 20px;">
        You solved all the riddles and unlocked the dungeon!<br>
        🎃 Well done, brave soul! 🎃
      </p>
      <div class="victory-emoji" style="animation-delay: 0.5s;">👻</div>
    `;
    
    overlay.appendChild(sparkles);
    overlay.appendChild(content);
    document.body.appendChild(overlay);
  }

  document.getElementById('unlockBtn').addEventListener('click', () => {
    const codeInput = document.getElementById('codeInput');
    const res = document.getElementById('result');
    const entered = stripZeroWidth((codeInput.value || '').trim().toUpperCase());
    
    if (!entered) {
      res.style.color = '#ff8c00';
      res.textContent = 'Enter the 5-letter code to escape!';
      return;
    }
    if (entered.length !== 5) {
      res.style.color = '#ff4444';
      res.textContent = 'Code must be 5 letters.';
      return;
    }
    
    const target = getFinalCode();
    if (entered === target) {
      res.style.color = '#00cc66';
      res.textContent = '🎉 Correct! Opening the dungeon...';
      setTimeout(() => {
        showVictoryScreen(target);
      }, 500);
    } else {
      res.style.color = '#ff4444';
      res.textContent = '❌ Wrong code... The dungeon remains locked.';
    }
  });

  document.getElementById('hintBtn').addEventListener('click', () => {
    const rn = prompt('Which riddle do you want a hint for? (1-5)');
    const hb = document.getElementById('hintBox');
    
    if (!rn) {
      hb.style.display = 'none'; 
      hb.innerHTML = '';
      return;
    }
    
    const n = parseInt(rn);
    if (hints[n]) {
      hb.style.display = 'block';
      hb.innerHTML = `<p style="font-family: sans-serif;">💡 Hint for Riddle ${n}: ${hints[n]}</p>`;
    } else {
      hb.style.display = 'block';
      hb.innerHTML = `<p style="font-family: sans-serif;">That riddle doesn't exist — try a number from 1 to 5.</p>`;
    }
  });

  // Initialize
  renderRiddles();
  updateProgressDisplay();

})();
</script>
</body>
</html>
